/*!CK:1342213334!*//*1379297159,168615217*/

if (self.CavalryLogger) { CavalryLogger.start_js(["+Bppa"]); }

__d("AdblockDetector",["CSS"],function(a,b,c,d,e,f){var g=b('CSS'),h='data-adblock-hash',i={},j=0;function k(l,m){var n=l.getAttribute(h);if(!n){n=++j;l.setAttribute(h,n);}else if(i[n]){clearTimeout(i[n]);i[n]=null;}i[n]=setTimeout(function(){i[n]=null;if(!l.offsetHeight){var o=l,p=document.getElementsByTagName('body')[0];while(o&&o!==p){if(!o.style||g.hasClass(o,'hidden_elem')||o.style.display==='none'||o.style.height==='0px'||o.style.height===0||o.style.height==='0'||o.childNodes.length===0)return;o=o.parentNode;}if(o===p)m&&m(l);}},3000);}f.assertUnblocked=k;});
__d("AdblockDetectorLogging",["AdblockDetector","EagleEye"],function(a,b,c,d,e,f){var g=b('AdblockDetector'),h=b('EagleEye');function i(j){g.assertUnblocked(j,h.log.bind(h,'ads',{event:'ads_blocked'}));}f.assertUnblocked=i;});
__d("EmuController",["AsyncRequest","DataStore","URI","copyProperties","emptyFunction","ge","goURI"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DataStore'),i=b('URI'),j=b('copyProperties'),k=b('emptyFunction'),l=b('ge'),m=b('goURI');function n(o,p){var q=l(o);if(!q)return null;this.impression=p;this.containerId=o;h.set(q,'emuController',this);return this;}n.prototype.event=function(o,p,q,r){var s={eid:this.impression,f:0,ui:this.containerId,en:o,a:1};if(p)s.ed=JSON.stringify(p);if(!r)r=k;var t=new g().setURI(this.EVENT_HANDLER_PATH).setData(s).setErrorHandler(r);if(q)t.setHandler(q);t.send();};n.prototype.redirect=function(){var o={eid:this.impression,f:0,ui:this.containerId,en:this.CLICK,a:0,sig:Math.floor(Math.random()*65535)+65536},p=new i(this.EVENT_HANDLER_PATH);p.setQueryData(o);m(p);};n.fromContainer=function(o){var p=l(o);if(!p)return null;return h.get(p,'emuController');};n.getEventClass=function(o){return "emuEvent"+String(o).trim();};j(n.prototype,{EVENT_HANDLER_PATH:'/ajax/emu/end.php',CLICK:1,FAN:"fad_fan"});e.exports=n;});
__d("legacy:ad-units-base-js",["EmuController"],function(a,b,c,d){a.EmuController=b('EmuController');},3);
__d("BassWhitespaceListener",["Bootloader","Event","Parent","copyProperties","goURI"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Event'),i=b('Parent'),j=b('copyProperties'),k=b('goURI');function l(m,n){this.link=n;h.listen(m,'click',this.onclicked.bind(this));}j(l.prototype,{onclicked:function(m){if(i.byTag(m.getTarget(),'A'))return;switch(this.link.getAttribute('rel')){case 'async':g.loadModules(['AsyncRequest'],function(o){o.bootstrap(this.link.getAttribute('ajaxify'),this.link);}.bind(this));break;case 'theater':var n=i.byClass(m.getTarget(),'fbPhotoSnowlift');g.loadModules(['PhotoViewer'],function(o){o.bootstrap(this.link.getAttribute('ajaxify'),this.link);}.bind(this));if(n)return false;break;default:k(this.link.getAttribute('href'));}}});e.exports=l;});
__d("legacy:ad-units-stream-whitespace",["BassWhitespaceListener"],function(a,b,c,d){a.BassWhitespaceListener=b('BassWhitespaceListener');},3);
__d("AppRequestReminders",["AsyncRequest","CSS","DOM","ge"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('ge'),k=0,l={},m=1,n=j('OtherAppReqReminder'),o=function(u,v,w){l[v]={node:u,seq:m++,reqCount:w};},p=function(u){k=u;},q=function(u){return u.id.split('_')[1];},r=function(u){var v=j(u),w=v.nextSibling;if(w!==n){h.show(w);k-=l[q(w)].reqCount;}s(k);},s=function(u){new g().setURI('/ajax/reminders/update_count.php').setData({new_count:u}).setMethod('POST').send();},t=function(u,v){if(n&&v&&u>0){i.setContent(j('OtherAppReqLabel'),v);}else if(n){h.hide(n);}else h.hide(j('OtherAppReqReminder'));};f.initNode=o;f.handleRemove=r;f.updateCount=t;f.setTotalOtherCount=p;});
__d("legacy:async-signal",["AsyncSignal"],function(a,b,c,d){a.AsyncSignal=b('AsyncSignal');},3);
__d("EgoUnitSlideInsert",["Animation","CSS","DataStore","DOM","Ease","Event","Parent","TidyArbiterMixin","cx","copyProperties","tidyEvent"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('Ease'),l=b('Event'),m=b('Parent'),n=b('TidyArbiterMixin'),o=b('cx'),p=b('copyProperties'),q=b('tidyEvent'),r='sliding',s="EgoSlider/End",t=p({isSliding:function(u){return i.get(u,r);},runAfterSlide:function(u,v){var w=q(t.subscribe(s,function(x,y){if(y===u){w&&w.unsubscribe();v();}}));},registerSlide:function(u,v){l.listen(u,'click',function(w){var x=m.byClass(w.getTarget(),"_5cl_");if(!x)return;var y=m.byClass(u,'ego_unit'),z=0,aa=m.byClass(y,'ego_unit_container'),ba=j.scry(aa,'.ego_unit')[0],ca=m.byClass(u,'ego_column');if(ba===y)if(h.hasClass(ca,"_8_9")){if(aa.firstChild===y)z=4;}else if(y.nextSibling){y.nextSibling.style.paddingTop='0px';y.nextSibling.style.borderTop='0px';}h.addClass(y,"_5cl-");i.set(y,r,true);new g(y).to('height',0).to('padding-top',z).to('padding-bottom',0).to('margin',0).from('opacity',1).to('opacity',0).ease(k.circOut).duration(300).checkpoint(1,function(){j.appendContent(aa,y);j.prependContent(y,v);i.remove(y,r);}).to('height',12).to('opacity',1).to('margin-bottom',10).duration(0).checkpoint(2,function(){t.inform(s,y);}).go();});}},n);e.exports=t;});
__d("NetEgo",["Animation","Arbiter","CSS","DOM","EgoUnitSlideInsert","PageLikeButton","Parent","URI","ge"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('EgoUnitSlideInsert'),l=b('PageLikeButton'),m=b('Parent'),n=b('URI'),o=b('ge'),p={setup:function(q){h.subscribe([l.LIKED,'FriendRequest/sending'],function(r,s){if((q==s.profile_id&&s.origin=='hovercard')||q==s.uid){var t=o(document.body,'.ego_unit_container');if(t){var u=j.scry(t,'.ego_unit'),v=u.length;for(var w=0;w<v;w++){var x=u[w].getAttribute('data-ego-fbid');if(x==q){var y=j.scry(u[w],'.ego_action a')[0];if(y)y.click();break;}}}}});},updateXids:function(q,r){if(q.length==0&&r.length==0)return;var s=function(ca){return function(da){var ea=da.getAttribute(ca);if(!ea)return false;var fa=new n(ea).getQueryData();return !!fa.xids;};},t=j.scry(document.body,'.ego_unit a');t=t.filter(s('ajaxify'));if(t.length==0)return;var u=new n(t[0].getAttribute('ajaxify')),v=u.getQueryData();if(!v.xids)return;try{var x=JSON.parse(v.xids);}catch(w){return;}for(var y=0;y<q.length;++y)delete x[q[y]];for(y=0;y<r.length;++y)x[r[y]]=1;var z=JSON.stringify(x),aa=function(ca,da){u=new n(ca.getAttribute(da));v=u.getQueryData();v.xids=z;u.setQueryData(v);ca.setAttribute(da,u.toString());};for(y=0;y<t.length;++y)aa(t[y],'ajaxify');var ba=j.scry(document.body,'.ego_unit form');ba=ba.filter(s('action'));for(y=0;y<ba.length;++y)aa(ba[y],'action');},replaceUnit:function(q,r,s,t){var u=m.byClass(q,'ego_unit_container');if(u&&k.isSliding(q)){var v=j.appendContent(u,r);v.forEach(i.hide);k.runAfterSlide(q,p._replaceUnitElement.bind(null,q,v));return;}p._replaceUnit(q,r,s,t);},_replaceUnit:function(q,r,s,t){var u=j.insertAfter(q,r);u.forEach(i.hide);if(t!==undefined&&t!==null){(function(){p._replaceUnitFadeout(q,u,s);}).defer(t);}else p._replaceUnitFadeout(q,u,s);},_replaceUnitFadeout:function(q,r,s){if(s){new g(q).from('opacity',1).to('opacity',0).duration(s).checkpoint(1,function(){p._replaceUnitElement(q,r);}).go();}else p._replaceUnitElement(q,r);},_replaceUnitElement:function(q,r){j.remove(q);r.forEach(i.show);h.inform('netego_replacedUnit');p.clearHeader();},clearHeader:function(){var q=j.scry(document.body,'.ego_column'),r=[];for(var s=0;s<q.length;++s)r=r.concat(j.scry(q[s],'.uiHeader'));for(s=0;s<r.length;++s){var t=r[s].nextSibling;if(!t||t.childNodes.length===0){j.remove(r[s]);}else if(t.childNodes.length===1){var u=t.childNodes[0];if(i.hasClass(u,'ego_appended_units')&&u.childNodes.length===0)j.remove(r[s]);}}}};e.exports=p;});
__d("LoadRecommendations",["Event","AsyncRequest"],function(a,b,c,d,e,f){var g=b('Event'),h=b('AsyncRequest'),i={loadOnClick:function(j){g.listen(j,'click',function(){new h().setURI('/ajax/pages/reminder/recommendations').send();});}};e.exports=i;});
__d("ReminderStory",["AsyncRequest","DOMQuery","Event","LayerAutoFocus","ScrollableArea","SubscriptionsHandler","UIPagelet","endsWith"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DOMQuery'),i=b('Event'),j=b('LayerAutoFocus'),k=b('ScrollableArea'),l=b('SubscriptionsHandler'),m=b('UIPagelet'),n=b('endsWith');function o(p,q,r,s){i.listen(p,'click',function(){q.show();if(r)new g('/growth/reminder/logging.php').setData({context_data:r}).send();});if(s)q.subscribeOnce('show',function(){m.loadFromEndpoint(s,q.getContent());});q.disableBehavior(j);q.subscribe('aftershow',function(){var t=q.getRoot(),u=h.scry(t,'#SuggestBelowInvite')[0];if(u)new g('/ajax/pages/reminder/recommendations').send();var v=q.hide.bind(q);this.$ReminderStory0=new l();this.$ReminderStory0.addSubscriptions(i.listen(window,'resize',v),i.listen(window,'scroll',v));var w=h.scry(t,'.inlineReplyTextArea')[0];w&&w.focus();var x=h.scry(t,'.jewelItemNew'),y=[];for(var z in x){var aa=x[z].getAttribute('id');if(aa&&n(aa,'_1_req'))y=y.concat(aa.replace('_1_req',''));}if(y.length>0)new g('/friends/requests/log_impressions').setData({ids:y.join(','),ref:'reminder_box'}).send();var ba=k.getInstance(h.scry(q.getRoot(),'.uiScrollableArea')[0]);if(ba){ba.poke();i.fire(h.scry(q.getRoot(),'.scrollable')[0],'scroll');}}.bind(this));q.subscribe('beforehide',function(){if(this.$ReminderStory0){this.$ReminderStory0.release();this.$ReminderStory0=null;}}.bind(this));}e.exports=o;});