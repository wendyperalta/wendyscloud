/*!CK:807985323!*//*1379691020,181993809*/

if (self.CavalryLogger) { CavalryLogger.start_js(["KKvjR"]); }

__d("LitestandStream",["Arbiter","AsyncSignal","DOM","DOMPosition","LitestandMessages","LitestandStoryInsertionStatus","LitestandStreamConfig","ViewportBounds","copyProperties","csx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncSignal'),i=b('DOM'),j=b('DOMPosition'),k=b('LitestandMessages'),l=b('LitestandStoryInsertionStatus'),m=b('LitestandStreamConfig'),n=b('ViewportBounds'),o=b('copyProperties'),p=b('csx'),q=b('ge'),r,s,t,u,v,w,x,y,z,aa={init:function(ba,ca,da){r=ca;s=Math.round(Date.now()/1000);v=da;w=ba;u=x=0;y=false;g.subscribe(k.STORIES_INSERTED,function(ea,fa){if(!fa||!fa.substream_id||!r)return;var ga=i.scry(q(fa.substream_id),aa.getStoriesSelector());ga.forEach(function(ha){var ia=ha.getAttribute('data-timestamp'),ja=ha.getAttribute('data-ft')&&JSON.parse(ha.getAttribute('data-ft')).ei;if(!ja&&ia&&ia<r)u++;if(!ja)t=ha.getAttribute('data-timestamp');x++;});});},getEmptySubstreamsSelector:function(){return "._4ikz:empty";},getStoriesSelector:function(){return "._5jmm,._8ru";},getStreamConfig:function(ba){return o({bufferPixels:1000,firstPagerScrollBuffer:100,maxStories:null,oldStoriesDelay:5000,oldStoriesLimit:30,pagerController:'LitestandMoreStoriesPagelet',pagerSelector:aa.getPagerSelector(),pollIntervalMS:null,newStoryIdleTime:60000},ba);},getPagerSelector:function(){return "._2as,._5kc_";},getStreamRoot:function(){return w;},getVisibleStoryCount:function(ba){var ca=i.scry(ba,aa.getStoriesSelector());return ca.length;},hideOffscreenSubstreams:function(){return m.hide_offscreen_substreams;},disableNewStoryBar:function(){return m.disable_new_story_bar;},hasOtherFeedsSwitcherExpansion:function(){return m.other_feeds_switcher_expand;},hasAutoUpdateTest:function(){return m.auto_update_test;},getStoryInterval:function(){if(!x||!t)return null;var ba=(s-t)/x;if(!y){y=true;new h('/ajax/litestand/log_avg_si',{interval:ba}).send();}return ba;},disableAutoUpdate:function(){if(!aa.hasAutoUpdateTest())return false;if(!m.auto_update_test_chat_visibility)return false;var ba=this.getStoryInterval(),ca=ba&&ba<m.fast_story_interval_threshold;return !ca;},getMinPollIntervalMS:function(){return m.min_poll_interval_ms;},getMinRefreshIntervalMS:function(){return m.min_refresh_interval_ms;},getInactiveThreshold:function(){return m.inactive_threshold;},getFastRefreshRateMS:function(){return m.fast_refresh_rate_ms;},getSlowRefreshRateMS:function(){return m.slow_refresh_rate_ms;},getAdditionalIntervalMS:function(){return m.additional_interval_ms;},getOldStoryCount:function(){return u;},getTotalStoryCount:function(){return x;},getTimeBetweenLoads:function(){return s-r;},getTimeSinceLoad:function(){return Math.round(Date.now()/1000)-s;},setHomeloadID:function(ba){z=ba;},getHomeloadID:function(){return z;},getSectionID:function(){return v;},canInsertNewerStories:function(){if(n.getTop()>j.getElementPosition(aa.getStreamRoot()).y)return false;return l.canInsert();}};e.exports=aa;});
__d("TrackingPixel",["Arbiter","ControlledReferer"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ControlledReferer'),i={_iframe:undefined,loadWithNoReferrer:function(j){if(!i._iframe){var k=document.createElement('iframe');k.frameborder=0;k.width=k.height=1;k.style.position='absolute';k.style.top='-10px';h.useFacebookReferer(k,function(){g.inform('TrackingPixel/iframeIsLoaded',null,g.BEHAVIOR_PERSISTENT);},null);document.body.appendChild(k);i._iframe=k;}g.subscribe('TrackingPixel/iframeIsLoaded',function(){var l=i._iframe.contentWindow.document,m=l.createElement('img');m.src=j;});}};e.exports=i;});
__d("ExternalTrackingTag",["AsyncSignal","TrackingPixel","Event"],function(a,b,c,d,e,f){var g=b('AsyncSignal'),h=b('TrackingPixel'),i=b('Event'),j={listenForElementClick:function(k,l,m,n){i.listen(k,'click',function(){j.sendRequest(l,m,n);});},sendRequest:function(k,l,m){if(!k)return;new g('/ads/external_tracking_tag/',{href:k,tracking_tag_id:l,adgroup_id:m}).send();h.loadWithNoReferrer(k);}};e.exports=j;});
__d("FeedAdsClickLogger",["Arbiter","AsyncRequest","Banzai","collectDataAttributes","DOM","LitestandMessages","LitestandStream","Parent","TrackingNodes","ExternalTrackingTag","URI"],function(a,b,c,d,e,f){var g='ssinfeed',h=b('Arbiter'),i=b('AsyncRequest'),j=b('Banzai'),k=b('collectDataAttributes'),l=b('DOM'),m=b('LitestandMessages'),n=b('LitestandStream'),o=b('Parent'),p=b('TrackingNodes'),q=b('ExternalTrackingTag'),r=b('URI'),s={},t=false,u=[];function v(){}v.prototype.init=function(w){h.subscribe("ClickRefAction/new",this.onNewUserAction.bind(this));if(w.append_tracking_data_to_links){this.appendTrackingDataToLinks();h.subscribe(m.STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this));}};v.prototype.appendTrackingDataToLinks=function(){var w=l.scry(n.getStreamRoot(),n.getStoriesSelector());for(var x=0;x<w.length;x++){var y=w[x];if(y in u)continue;var z=y.getAttribute('data-ft');if(!z||(z.indexOf('ei')===-1)&&(z.indexOf('mei')===-1))continue;var aa=l.scry(y,'a');for(var ba=0;ba<aa.length;ba++){var ca=aa[ba];if(ca.getAttribute('ajaxify')!=null)continue;var da=ca.getAttribute('href');if(!da||da.charAt(0)==='#')continue;var ea=r(ca);if(ea.isFacebookURI()===false)continue;if(ea.isLinkshimURI()===true)continue;var fa=k(ca,['ft']).ft,ga=ea.getQueryData();ga.ft=fa;ea.setQueryData(ga);ca.setAttribute('href',ea.toString());}u.push(y);}};v.prototype.getHref=function(w){return (w.getAttribute&&(w.getAttribute('ajaxify')||w.getAttribute('data-endpoint'))||w.action||w.href||w.name);};v.prototype.sendLogRequest=function(w){var x=w.ei||w.ai;if(!x&&w.mei)x=w.mf_story_key;if(w!==null&&typeof(x)==="string"){var y=false;if(w.tn){var z=p.parseTrackingNodeString(w.tn);for(var aa=0;aa<z.length;aa++){var ba=z[aa][0];switch(ba){case p.types.LIKE_LINK:case p.types.UNLIKE_LINK:case p.types.COMMENT:case p.types.ADD_COMMENT_BOX:return;case p.types.XBUTTON:case p.types.HIDE_LINK:case p.types.REPORT_SPAM_LINK:case p.types.HIDE_ALL_LINK:case p.types.DROPDOWN_BUTTON:case p.types.UNHIDE_LINK:return;case p.types.RELATED_SHARE_ARTICLE:case p.types.RELATED_SHARE_VIDEO:return;case p.types.ATTACHMENT:case p.types.USER_MESSAGE:y=true;break;}}}var ca=Date.now(),da=500;w.duplicate_click=!!s[x]&&(ca-s[x]<da);s[x]=ca;if(j.isEnabled('ssinfeed')){j.post(g,w,{delay:0,retry:j.isEnabled('ssinfeed_retry')});}else{var ea=new i('/ajax/ssinfeed/end/').setData(w).setAllowCrossPageTransition(true).setMethod('POST');ea.send();}var fa=r(w.href).getQueryData().u;if(y&&w.external_tracking_tag&&!w.duplicate_click&&fa&&r(fa).isFacebookURI()===false)q.sendRequest(w.external_tracking_tag.url,w.external_tracking_tag.tag_id,w.external_tracking_tag.adgroup_id);}};v.prototype.onNewUserAction=function(w,x){if(!x.node)return;var y=this.getHref(x.node),z=o.byTag(x.node,'input')||o.byTag(x.node,'button');if(!y&&z&&z.type=="submit"&&z.getAttribute&&z.getAttribute('data-ft'))y="#";var aa;if(y&&x.event&&(x.event.type==='click'||x.event.type==='contextmenu')){aa=k(x.node,['ft']);aa.ft.href=y;aa.ft.mouse_type=x.event.type;this.sendLogRequest(aa.ft);}};e.exports.init=function(w){if(t===false){(new v()).init(w);t=true;}};});
__d("PopoverMenu.react",["CSS","InlineBlock.react","Popover","PopoverMenu","React","ReactPropTypes","SubscriptionsHandler","cx","joinClasses"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('InlineBlock.react'),i=b('Popover'),j=b('PopoverMenu'),k=b('React'),l=b('ReactPropTypes'),m=b('SubscriptionsHandler'),n=b('cx'),o=b('joinClasses');function p(r,s){var t,u;for(var v in r){t=r[v];u=s[v];if(typeof t==='object'&&typeof u==='object'){if(!p(t,u))return false;}else if(t!==u)return false;}return true;}var q=k.createClass({displayName:'ReactPopoverMenu',propTypes:{alignh:l.oneOf(['left','center','right']),layerBehaviors:l.array,menu:l.object,disabled:l.bool},_menuSubscriptions:null,componentDidMount:function(){var r=this.refs.root.getDOMNode(),s=r.firstChild;g.addClass(s,"_p");this._popover=new i(r,s,this.props.layerBehaviors,{alignh:this.props.alignh,disabled:this.props.disabled});this._popoverMenu=new j(this._popover,s,this._createMenu(this.props.menu),this.props.behaviors);},componentDidUpdate:function(r){if(!p(r.menu,this.props.menu)){if(this._menuSubscriptions){this._menuSubscriptions.release();this._menuSubscriptions=null;}this._popoverMenu.setMenu(this._createMenu(this.props.menu));}if(this.props.alignh!==r.alignh)this._popoverMenu.getPopover().getLayer().setAlignment(this.props.alignh);if(this.props.disabled!==r.disabled)if(this.props.disabled){this._popoverMenu.disable();}else this._popoverMenu.enable();},getFirstChild:function(){var r=this.props.children;return Array.isArray(r)?r[0]:r;},getButtonSize:function(){var r=this.getFirstChild();return r&&r.getButtonSize();},render:function(){var r=this.getFirstChild();r.props.className=o(r.props.className||'',"_p");return this.transferPropsTo(h({alignv:"middle",className:"uiPopover",ref:"root",disabled:null},this.props.children));},componentWillUnmount:function(){if(this._menuSubscriptions){this._menuSubscriptions.release();this._menuSubscriptions=null;}},_createMenu:function(r){var s=new r.ctor(r.menuitems,r.config);this._menuSubscriptions=new m();if(r.onItemClick)this._menuSubscriptions.addSubscriptions(s.subscribe('itemclick',r.onItemClick));if(r.onChange)this._menuSubscriptions.addSubscriptions(s.subscribe('change',r.onChange));if(this.props.onShow)this._menuSubscriptions.addSubscriptions(this._popover.subscribe('show',this.props.onShow));if(this.props.onHide)this._menuSubscriptions.addSubscriptions(this._popover.subscribe('hide',this.props.onHide));return s;},showPopover:function(){this._popover.showLayer();}});e.exports=q;});
__d("ReactMenu",["Menu","MenuItem","MenuSelectableItem","MenuTheme","SelectableMenu","cx","flattenArray","joinClasses","merge"],function(a,b,c,d,e,f){var g=b('Menu'),h=b('MenuItem'),i=b('MenuSelectableItem'),j=b('MenuTheme'),k=b('SelectableMenu'),l=b('cx'),m=b('flattenArray'),n=b('joinClasses'),o=b('merge'),p=Array.prototype.slice;function q(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:g,menuitems:m(s||[]),config:{theme:j,maxheight:r?r.maxheight:null}};return o(t,r);}q.SelectableMenu=function(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:k,menuitems:m(s),config:{className:n("_57di",r?r.className:null),theme:j,multiple:r&&r.multiple,maxheight:r?r.maxheight:null}};return o(t,r);};q.Item=function(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:h,reactChildren:s};return o(t,r);};q.SelectableItem=function(r,s){if(!Array.isArray(s))s=p.call(arguments,1);var t={ctor:i,reactChildren:s};return o(t,r);};e.exports=q;});
__d("UFIOrderingModeSelector.react",["InlineBlock.react","Link.react","LoadingIndicator.react","React","Image.react","ReactMenu","PopoverMenu.react","cx","ix"],function(a,b,c,d,e,f){var g=b('InlineBlock.react'),h=b('Link.react'),i=b('LoadingIndicator.react'),j=b('React'),k=b('Image.react'),l=b('ReactMenu'),m=b('PopoverMenu.react'),n=b('cx'),o=b('ix'),p=l.SelectableMenu,q=l.SelectableItem,r=j.createClass({displayName:'UFIOrderingModeSelector',getInitialState:function(){var s=null;this.props.orderingmodes.map(function(t){if(t.selected)s=t;});return {selectedMode:s};},onMenuItemClick:function(s,t){var u=t.item.getValue();this.props.orderingmodes.map(function(v){if(v.value===u)this.setState({selectedMode:v});}.bind(this));this.props.onOrderChanged(u);},render:function(){var s=null;if(this.props.currentOrderingMode!=this.state.selectedMode.value)s=i({className:"UFIOrderingModeSelectorLoading",color:"white",size:"small"});var t=p({onItemClick:this.onMenuItemClick},this.props.orderingmodes.map(function(u){return (q({key:u.value,value:u.value,selected:u.value===this.state.selectedMode.value},u.name));}.bind(this)));return (j.DOM.div({className:"UFIOrderingModeSelector"},s,g(null,m({className:"UFIOrderingModeSelectorPopover",menu:t,alignh:"right"},h(null,this.state.selectedMode.name,k({className:"UFIOrderingModeSelectorDownCaret",src:o('/images/ui/xhp/link/more/down_caret.gif')}))))));}});e.exports=r;});