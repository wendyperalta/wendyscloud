/*!CK:1339666541!*//*1379687875,178598469*/

if (self.CavalryLogger) { CavalryLogger.start_js(["a7RDT"]); }

__d("SubscriptionLevels",[],function(a,b,c,d,e,f){var g={ALL:'162318810514679',DEFAULT:'271670892858696',TOP:'266156873403755'};e.exports=g;});
__d("EditSubscriptions",["Event","function-extensions","Arbiter","AsyncRequest","CSS","DOM","MenuDeprecated","Parent","SubscriptionLevels","FeedBlacklistButton","arrayContains","cx","ge"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('MenuDeprecated'),m=b('Parent'),n=b('SubscriptionLevels'),o=b('FeedBlacklistButton'),p=b('arrayContains'),q=b('cx'),r=b('ge'),s=45,t=[n.ALL,n.DEFAULT,n.TOP],u={},v={},w={},x={},y={},z={},aa={},ba={},ca={},da={},ea={},fa="/ajax/follow/follow_profile.php",ga="/ajax/follow/unfollow_profile.php",ha="/ajax/settings/notifications/notify_me.php",ia={},ja={},ka=null,la=false,ma={};function na(kb){return p(t,kb);}function oa(kb,lb,mb,nb){var ob=m.byClass(nb,'uiMenuItem')||m.byClass(nb,"_54ni"),pb=k.getID(kb);if(!ob||!k.contains(kb,ob)){return;}else if(j.hasClass(ob,'SubscribeMenuSubscribeCheckbox')){if(w[lb]){sa(pb,lb);}else ra(pb,lb);return false;}else if(j.hasClass(ob,'SubscribeMenuUnsubscribe')){sa(pb,lb);return false;}else if(j.hasClass(ob,'SubscribeMenuSettingsItem')){eb(kb,true);return false;}else if(j.hasClass(ob,'SubscriptionMenuGoBack')){eb(kb,false);return false;}else if(j.hasClass(ob,'SubscriptionMenuItem')){pa(kb,lb,mb,ob);return false;}else if(j.hasClass(ob,'SubscribeMenuNotifyMeCheckbox')){if(x[lb]){ib(kb,lb);}else hb(kb,lb);return false;}}function pa(kb,lb,mb,nb){if(j.hasClass(nb,'SubscriptionMenuLevel')){if(l.isItemChecked(nb))return;cb(kb,lb,va(nb),true,mb);}else if(j.hasClass(nb,'SubscriptionMenuCategory')){za(lb,nb,!l.isItemChecked(nb),true,mb);}else if(j.hasClass(nb,'SubscriptionAppStory'))bb(lb,nb,!l.isItemChecked(nb),mb);}function qa(kb){return ma[kb]?ma[kb]:0;}function ra(kb,lb){var mb={profile_id:lb};h.inform('FollowingUser',mb);h.inform(o.UNBLACKLIST,mb);new i().setURI(fa).setMethod('POST').setData({profile_id:lb,location:qa(kb)}).setErrorHandler(h.inform.curry('FollowUserFail',mb)).send();}function sa(kb,lb){var mb={profile_id:lb};h.inform('UnfollowingUser',mb);h.inform(o.BLACKLIST,mb);new i().setURI(ga).setMethod('POST').setData({profile_id:lb,location:qa(kb)}).setErrorHandler(h.inform.curry('UnfollowUserFail',mb)).send();}function ta(kb,lb,mb){var nb={profile_id:kb,level:ba[kb],custom_categories:ca[kb],location:mb};new i().setURI('/ajax/follow/manage_subscriptions.php').setData(nb).send();}function ua(kb,lb){var mb=ca[lb]||[],nb=l.getItems(kb);nb.forEach(function(ob){if(j.hasClass(ob,'SubscriptionMenuCategory')){var pb=va(ob);if(p(mb,pb)){xa(ob);}else ya(ob);}else if(j.hasClass(ob,'SubscriptionAppStory')){var qb=va(ob);if(ja[lb]&&ja[lb][qb]){xa(ob);}else ya(ob);}});cb(kb,lb,ba[lb],false);}function va(kb){var lb=k.scry(kb,'input')[0];return lb&&lb.value;}function wa(kb){return k.find(kb,'a.itemAnchor');}function xa(kb){j.addClass(kb,'checked');wa(kb).setAttribute('aria-checked',true);}function ya(kb){j.removeClass(kb,'checked');wa(kb).setAttribute('aria-checked',false);}function za(kb,lb,mb,nb,ob){if(mb){xa(lb);}else ya(lb);var pb=va(lb);if(na(pb)){mb&&ab(kb,pb);}else if(mb){if(!p(ca[kb],pb))ca[kb].push(pb);}else{var qb=ca[kb].indexOf(pb);if(qb!==-1)ca[kb].splice(qb,1);}if(nb)ta(kb,pb,ob);}function ab(kb,lb){ba[kb]=lb;h.inform('SubscriptionLevelUpdated',{profile_id:kb,level:lb});}function bb(kb,lb,mb,nb){var ob='/ajax/feed/filter_action/',pb=va(lb),qb={actor_id:kb,app_id:pb};if(mb){xa(lb);ob+='resubscribe_user_app/';qb.action='resubscribe_user_app';if(!ja[kb])ja[kb]={};ja[kb][pb]=true;}else{ya(lb);ob+='unsubscribe_user_app_checkbox/';qb.action='unsubscribe_user_app_checkbox';if(ja[kb])ja[kb][pb]=false;}new i().setURI(ob).setData(qb).send();}function cb(kb,lb,mb,nb,ob){var pb=k.scry(kb,'.SubscriptionMenuLevel'),qb=null;pb.forEach(function(rb){if(va(rb)==mb){qb=rb;}else if(l.isItemChecked(rb))za(lb,rb,false,false);});qb&&za(lb,qb,true,nb,ob);}function db(kb,lb,mb){w[lb]=mb;j.conditionClass(kb,'isUnsubscribed',!mb);var nb=k.scry(kb,'li.SubscribeMenuSubscribeCheckbox');if(nb.length!==0){var ob=nb[0];if(j.hasClass(ob,'FeedCurationInvert'))mb=!mb;if(mb){xa(ob);}else ya(ob);}}function eb(kb,lb){j.conditionClass(kb,'subscriptionMenuOpen',lb);}function fb(kb,lb,mb){var nb=k.find(kb,".FriendListSubscriptionsMenu"),ob=k.find(nb,".uiMenuInner");if(ka!=null)ka.forEach(function(pb){ob.removeChild(pb);});mb.forEach(function(pb){ob.appendChild(pb);});ka=mb;}h.subscribe('UnfollowUser',function(kb,lb){if(da[lb.profile_id]){ab(lb.profile_id,da[lb.profile_id]);ca[lb.profile_id]=ea[lb.profile_id].slice();}});h.subscribe('UpdateSubscriptionLevel',function(kb,lb){var mb=lb.profile_id+'',nb=lb.level+'';ab(mb,nb);var ob;for(ob in u)if(u[ob]===mb){var pb=r(ob);pb&&cb(pb,mb,nb,false);}});function gb(kb,lb,mb){x[lb]=mb;var nb=z[lb]&&!la,ob=k.scry(kb,'li.SubscribeMenuNotifyMeCheckbox');if(ob.length!==0){var pb=ob[0];j.conditionShow(pb,!nb);j.conditionShow(k.find(kb,'li.SubscribeMenuNotifyMeCheckboxSeparator'),!nb);if(mb){xa(pb);}else ya(pb);}}function hb(kb,lb){var mb={profile_id:lb};h.inform('EnableNotifsForUser',mb);new i().setURI(ha).setMethod('POST').setData({notifier_id:lb,enable:true}).setErrorHandler(h.inform.curry('EnableNotifsForUserFail',mb)).send();}function ib(kb,lb){var mb={profile_id:lb};h.inform('DisableNotifsForUser',mb);new i().setURI(ha).setMethod('POST').setData({notifier_id:lb,enable:false}).setErrorHandler(h.inform.curry('DisableNotifsForUserFail',mb)).send();}var jb={init:function(kb,lb,mb){var nb=k.getID(kb);ma[nb]=mb;if(!u[nb])g.listen(kb,'click',function(ob){return oa(kb,u[nb],mb,ob.getTarget());});if(mb===s&&ia[lb].length)fb(kb,lb,ia[lb]);if(ba[lb])ua(kb,lb);u[nb]=lb;j.conditionClass(kb,'NonFriendSubscriptionMenu',!v[lb]);j.conditionClass(kb,'cannotSubscribe',!y[lb]);j.conditionClass(kb,'noSubscriptionLevels',z[lb]&&!aa[lb]);j.conditionClass(kb,'noSubscribeCheckbox',!v[lb]&&!z[lb]);db(kb,lb,w[lb]);gb(kb,lb,x[lb]);h.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],function(ob,pb){if(pb.profile_id==lb)db(kb,lb,true);}.bind(this));h.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],function(ob,pb){if(pb.profile_id==lb){h.inform('SubMenu/Reset');db(kb,lb,false);}}.bind(this));h.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],function(ob,pb){gb(kb,lb,true);}.bind(this));h.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],function(ob,pb){gb(kb,lb,false);}.bind(this));h.subscribe('listeditor/friend_lists_changed',function(ob,pb){if(pb.notify_state){var qb=pb.added_uid?pb.added_uid:pb.removed_uid;gb(kb,qb,pb.notify_state.is_notified);}}.bind(this));},getSubscriptions:function(kb){return {level:ba[kb],custom_categories:ca[kb]};},setSubscriptions:function(kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb){ab(kb,qb+'');v[kb]=lb;w[kb]=mb;y[kb]=nb;z[kb]=ob;aa[kb]=pb;da[kb]=sb+'';ca[kb]=rb.map(String);ea[kb]=tb.map(String);ia[kb]=wb;x[kb]=ub;la=vb;}};e.exports=a.EditSubscriptions||jb;});
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],function(a,b,c,d){a.SubscriptionLevels=b('SubscriptionLevels');a.EditSubscriptions=b('EditSubscriptions');},3);
__d("DynamicFriendListEducation",["Event","Arbiter","AsyncRequest","Dialog","PageTransitions","arrayContains","createArrayFrom","removeFromArray"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Dialog'),k=b('PageTransitions'),l=b('arrayContains'),m=b('createArrayFrom'),n=b('removeFromArray'),o,p,q,r,s,t;function u(){q&&q.hide();r&&r.hide();}function v(y){n(p,y);u();s({accept_tag_education:true});}function w(){u();s({nux_cancel:true});}var x={init:function(y,z){o=y;p=m(z).map(String);k.registerHandler(function(){u();o=false;s=undefined;p=[];});},showDialog:function(y,z,aa){if(o&&l(p,y)){u();h.inform('DynamicFriendListEducation/dialogOpen',{uid:z,flid:y});s=aa;q=new j().setAsync(new i('/ajax/friends/lists/smart_list_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true)).setHandler(v.bind(this,y)).setCloseHandler(function(){h.inform('DynamicFriendListEducation/dialogClosed',{uid:z,flid:y});}).setCancelHandler(function(){h.inform('DynamicFriendListEducation/dialogCancel',{uid:z,flid:y});}).show();}else aa();},showContextualDialog:function(y,z,aa,ba){if(o&&l(p,y)){u();t=aa;s=ba;new i('/ajax/friends/lists/smart_list_contextual_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true).send();}else ba();},setContextualDialog:function(y,z,aa,ba){r=y;r.setContext(t);r.show();g.listen(z,'click',v.bind(this,ba));g.listen(aa,'click',w);}};e.exports=x;});
__d("FriendStatus",["function-extensions","Arbiter","AsyncRequest","arrayContains","copyProperties","createArrayFrom","eachKeyVal"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('arrayContains'),j=b('copyProperties'),k=b('createArrayFrom'),l=b('eachKeyVal');function m(q,r,s){this.id=q;this.update(r,s);}j(m.prototype,{update:function(q,r){q&&(this.status=q);if(r){this.lists=k(r).map(String);this._informListChange();}},isComplete:function(){return !!this.lists;},addToList:function(q){if(this.lists&&!i(this.lists,q))this.lists.push(q);this._informListChange();},removeFromList:function(q){if(this.lists){var r=this.lists.indexOf(q);r!==-1&&this.lists.splice(r,1);}this._informListChange();},updateList:function(q,r){r?this.addToList(q):this.removeFromList(q);},_informListChange:function(){g.inform('FriendListMembershipChange',{uid:this.id,lists:this.lists});}});j(m,{ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4});var n={},o={};function p(q,r,s){if(!n[s.uid]){n[s.uid]=new m(s.uid,q);}else n[s.uid].update(q);g.inform('FriendRequest/change',{uid:s.uid,status:q});}g.subscribe(['FriendRequest/cancel','FriendRequest/unfriend','FriendRequest/sendFail'],p.curry(m.CAN_REQUEST));g.subscribe(['FriendRequest/confirmFail'],p.curry(m.INCOMING_REQUEST));g.subscribe(['FriendRequest/cancelFail','FriendRequest/sent','FriendRequest/sending'],p.curry(m.OUTGOING_REQUEST));g.subscribe(['FriendRequest/confirm','FriendRequest/confirming'],p.curry(m.ARE_FRIENDS));j(m,{CLOSE_FRIENDS:null,ACQUAINTANCES:null,getFriend:function(q,r){if(n[q]&&n[q].isComplete()){r(n[q]);}else if(o[q]){o[q].push(r);}else{o[q]=[r];new h().setURI("/ajax/friends/status.php").setData({friend:q}).setHandler(function(s){var t=s.getPayload();m.initFriend.bind(m,q,t.status,t.lists).defer();}).send();}},initFriend:function(q,r,s){var t=n[q]||new m(q);t.update(t.status||r,t.lists||s);n[q]=t;o[q]&&o[q].forEach(function(u){u(t);});o[q]=null;},setSpecialLists:function(q){var r=m.CLOSE_FRIENDS===null;m.CLOSE_FRIENDS=q.close+'';m.ACQUAINTANCES=q.acq+'';if(r)l(n,function(s,t){t._informListChange();});}});e.exports=m;});
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","$","arrayContains","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOMQuery'),k=b('DynamicFriendListEducation'),l=b('EditSubscriptions'),m=b('FriendStatus'),n=b('MenuDeprecated'),o=b('Parent'),p=b('ScrollableArea'),q=b('URI'),r=b('$'),s=b('arrayContains'),t=b('copyProperties'),u=b('ge'),v=5,w={},x='/ajax/profile/removefriendconfirm.php',y='/ajax/friends/requests/cancel.php',z='/ajax/choose/',aa='/profile.php',ba='/ajax/report/social.php',ca,da,ea={profile_browser:43,fbx_top_bar:1,hovercard:5};function fa(qa,ra,sa){var ta=w[qa.id],ua=function(va){var wa={action:sa?'add_list':'del_list',to_friend:ta.id,friendlists:[ra],source:ca};if(va)t(wa,va);ta.updateList(ra,sa);var xa;if(sa&&ra==m.CLOSE_FRIENDS){xa=ia(qa,m.ACQUAINTANCES);if(n.isItemChecked(xa)){n.toggleItem(xa);fa(qa,m.ACQUAINTANCES,false);}}else if(sa&&ra==m.ACQUAINTANCES){xa=ia(qa,m.CLOSE_FRIENDS);if(n.isItemChecked(xa)){n.toggleItem(xa);fa(qa,m.CLOSE_FRIENDS,false);}}var ya={flid:ra,uid:ta.id},za=sa?'FriendListHovercard/add':'FriendListHovercard/remove';g.inform(za,ya);new h().setURI('/ajax/add_friend/action.php').setData(wa).send();};if(sa){k.showDialog(ra,ta.id,ua);}else ua();}function ga(qa){var ra=j.scry(qa,'input')[0];return ra&&ra.value;}function ha(qa,ra,sa){var ta={uid:ra.id};new h().setURI(y).setMethod('POST').setData({friend:ra.id}).setHandler(g.inform.bind(g,'FriendRequest/cancel',ta)).setErrorHandler(g.inform.bind(g,'FriendRequest/cancelFail',ta)).setStatusElement(sa).send();}function ia(qa,ra){var sa=n.getItems(qa);for(var ta=0;ta<sa.length;ta++)if(ga(sa[ta])==ra)return sa[ta];return null;}function ja(qa,ra){var sa=n.getItems(qa);sa.forEach(function(ta){var ua=ga(ta),va=s(ra.lists,ua);if(n.isItemChecked(ta)!==va)n.toggleItem(ta);});}function ka(qa){var ra=n.getItems(qa),sa=!i.hasClass(qa,'followButtonFlyout')&&!i.hasClass(qa,'likeButtonFlyout'),ta=[],ua=[],va=0,wa=0;ra.forEach(function(bb){if(i.hasClass(bb,'neverHide')){i.removeClass(bb,'underShowMore');va++;}else if(n.isItemChecked(bb)){ta.push(bb);}else if(i.hasClass(bb,'neverShow')||i.hasClass(bb,'FriendListCreateTrigger')||(!sa&&i.hasClass(bb,'friendOptionsOnly'))){i.addClass(bb,'underShowMore');wa++;}else ua.push(bb);});var xa=v-va,ya=ta.concat(ua),za=wa;ya.forEach(function(bb){if(i.hasClass(bb,'ShowMoreItem')){xa--;return;}if(xa){i.removeClass(bb,'underShowMore');xa--;}else{i.addClass(bb,'underShowMore');za=true;}});i.conditionClass(qa,'hasMoreFriendListItems',za);var ab=j.scry(qa,'.FriendListMenuShowMore');ab.forEach(function(bb){i.removeClass(bb,'FriendListMenuShowMore');});}function la(qa,ra){i.conditionClass(qa,'FriendListMemorializedUser',ra);}function ma(qa,ra){i.conditionClass(qa,'FriendListCannotSuggestFriends',!ra);}function na(qa,ra){var sa=j.scry(qa,'.FriendListUnfriend')[0],ta=j.scry(qa,'.FriendListCancel')[0],ua=j.scry(qa,'.FriendListSuggestFriends')[0],va=j.scry(qa,'.FriendListFriendship')[0],wa=j.scry(qa,'.FriendListReportBlock')[0];if(ta)i.conditionShow(ta,ra.status==m.OUTGOING_REQUEST);if(sa){i.conditionShow(sa,ra.status==m.ARE_FRIENDS);var xa=j.find(sa,'a');xa.setAttribute('ajaxify',q(x).addQueryData({uid:ra.id,unref:da}).toString());}else i.conditionClass(qa,'NoFriendListActionSeparator',!ta||ra.status!=m.OUTGOING_REQUEST);if(ua)j.find(ua,'a').setAttribute('href',q(z).addQueryData({type:'suggest_friends',newcomer:ra.id,ref:'profile_others_dropdown'}).toString());if(va){i.conditionShow(va,ra.status==m.ARE_FRIENDS);j.find(va,'a').setAttribute('href',q(aa).addQueryData({and:ra.id}).toString());}if(wa)j.find(wa,'a').setAttribute('ajaxify',q(ba).addQueryData({content_type:0,cid:ra.id,rid:ra.id}).toString());}function oa(qa,ra,sa){var ta=j.scry(qa,'div.FriendListSubscriptionsMenu');if(ta.length!==0)l.init(qa,ra,sa);}g.subscribe('FriendRequest/change',function(qa,ra){for(var sa in w){var ta=u(sa),ua=w[sa];if(ta&&ua&&ua.id==ra.uid){ja(ta,ua);na(ta,ua);ka(ta);}}});n.subscribe('select',function(qa,ra){if(i.hasClass(ra.item,'ShowMoreItem')&&i.hasClass(ra.menu,'FriendListMenu')){i.addClass(ra.menu,'FriendListMenuShowMore');p.poke(ra.item);}});var pa={init:function(qa,ra,sa,ta,ua,va){qa=r(qa);ca=sa;da=va;var wa=ea[sa]||45;if(!w[qa.id])n.subscribe('select',function(xa,ya){if(j.contains(qa,ya.item))if(o.byClass(ya.item,'FriendListItem')){n.toggleItem(ya.item);var za=ga(ya.item);fa(qa,za,n.isItemChecked(ya.item));}else if(o.byClass(ya.item,'FriendListCancel')){ha(qa,w[qa.id],ya.item);}else if(o.byClass(ya.item,'FriendListUnfriend'))g.inform('FriendEditLists/unfriend');});i.addClass(qa,'async_saving');m.getFriend(ra,function(xa){la(qa,ta);ma(qa,ua);ja(qa,xa);na(qa,xa);w[qa.id]=xa;ka(qa);oa(qa,ra,wa);i.removeClass(qa,'async_saving');}.bind(this));}};e.exports=a.FriendEditLists||pa;});
__d("FriendListFlyoutController",["Event","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","Dialog","DOM","DOMQuery","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent","cx","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Button'),k=b('ContextualLayer'),l=b('CSS'),m=b('DataStore'),n=b('Dialog'),o=b('DOM'),p=b('DOMQuery'),q=b('FriendEditLists'),r=b('FriendStatus'),s=b('Keys'),t=b('Layer'),u=b('LayerHideOnEscape'),v=b('LayerTabIsolation'),w=b('MenuDeprecated'),x=b('Parent'),y=b('ScrollableArea'),z=b('Style'),aa=b('TabbableElements'),ba=b('UserAgent'),ca=b('cx'),da=b('emptyFunction'),ea,fa,ga=null,ha=null,ia,ja,ka,la,ma,na,oa=1500,pa,qa=['uiButtonConfirm','uiButtonSpecial',"_42gz","_42g-","_4jy2","_51tl","_4jy1"],ra={init:function(tb,ub){ra.init=da;ea=tb;ea.subscribe('mouseenter',ab);ea.subscribe('mouseleave',ob);ea.subscribe('hide',cb);ea.enableBehavior(v);ea.enableBehavior(u);pa=ub;if(ga)o.setContent(ea.getContent(),[ga,ha]);var vb=function(wb){var xb=x.byClass(wb.getTarget(),'enableFriendListFlyout');if(xb)if(ia===xb){clearTimeout(la);}else{fa&&qb();nb(xb);}};g.listen(document.documentElement,{mouseover:vb,click:vb,keydown:function(event){var wb=event.getTarget();if(event.getModifiers().any)return;if(!fa||p.isNodeOfType(wb,['input','textarea']))return;var xb=g.getKeyCode(event),yb;switch(xb){case s.UP:case s.DOWN:var zb=za();yb=xa(zb);va(zb[yb+(xb===s.UP?-1:1)]);return false;case s.SPACE:var ac=wa(wb);if(ac){sa(ac);event.prevent();}break;default:var bc=String.fromCharCode(xb).toLowerCase(),cc=za();yb=xa(cc);var dc=yb,ec=cc.length;while((~yb&&(dc=++dc%ec)!==yb)||(!~yb&&++dc<ec)){var fc=w.getItemLabel(cc[dc]);if(fc&&fc.charAt(0).toLowerCase()===bc){va(cc[dc]);return false;}}}}});h.subscribe('FriendEditLists/unfriend',qb);h.subscribe('DynamicFriendListEducation/dialogOpen',function(){na=true;});h.subscribe('DynamicFriendListEducation/dialogClosed',function(){na=false;ob();});},initContent:function(tb){o.appendContent(document.body,tb);db(tb);(function(){if(!ga){ga=tb;ea&&o.setContent(ea.getContent(),[ga,ha]);l.show(ga);g.listen(ga,'click',rb);fa&&kb(ia);}else{o.remove(tb);tb=null;}}).defer();},initNux:function(tb){if(ha)return;ha=tb;ea&&o.setContent(ea.getContent(),[ga,ha]);},show:function(tb){lb(tb);},hide:function(tb){tb===false?qb():ob();},setActiveNode:function(tb){fa&&qb();ia=tb;ja=g.listen(tb,'mouseleave',function(){ia=null;ja&&ja.remove();});},setCloseListener:function(tb,ub){m.set(tb,'flfcloselistener',ub);if(ia!=tb)m.set(tb,'flfcloselistenertimeout',sb.curry(tb).defer(oa));},setCloseListenerTimeout:function(tb){oa=tb;}};function sa(tb){ba.firefox()&&ua(tb).blur();w.inform('select',{menu:ta(tb),item:tb});}function ta(tb){if(l.hasClass(tb,'uiMenuContainer'))return tb;return x.byClass(tb,'uiMenu');}function ua(tb){return p.find(tb,'a.itemAnchor');}function va(tb){if(tb&&ya(tb)){w._removeSelected(ea.getContent());l.addClass(tb,'selected');ua(tb).focus();}}function wa(tb){return x.byClass(tb,'uiMenuItem');}function xa(tb){if(document.activeElement){var ub=wa(document.activeElement);return tb.indexOf(ub);}return -1;}function ya(tb){return !l.hasClass(tb,'disabled')&&z.get(tb,'display')!=='none'&&z.get(x.byClass(tb,'uiMenu'),'display')!=='none';}function za(){return w.getItems(ea.getContent()).filter(ya);}function ab(){clearTimeout(la);}function bb(tb){for(var ub=0;ub<qa.length;ub++)if(l.hasClass(tb,qa[ub]))return false;return true;}function cb(){if(ia){if(bb(ia)){l.removeClass(ia,"_52nd");if(l.hasClass(ia,'uiButton')||l.hasClass(ia,"_42fu"))l.removeClass(ia,'selected');}if(m.get(ia,'flfcloselistener')){var tb=ia;m.set(ia,'flfcloselistenertimeout',sb.curry(tb).defer(oa));}}fa=false;jb();ia=null;}function db(tb){var ub=p.scry(tb,'[tabindex="0"]');ub.forEach(function(vb){vb.tabIndex='-1';});ub[0]&&(ub[0].tabIndex='0');}function eb(tb){if(p.isNodeOfType(tb,'label')&&l.hasClass(tb,'uiButton'))tb=j.getInputElement(tb);return tb;}function fb(tb){return m.get(eb(tb),'profileid');}function gb(tb){return m.get(eb(tb),'memorialized')==='true';}function hb(tb){return m.get(eb(tb),'cansuggestfriends')==='true';}function ib(tb){return m.get(eb(tb),'unref');}function jb(){ja&&ja.remove();ja=null;ma&&t.unsubscribe(ma);ma=null;la&&clearTimeout(la);la=null;}function kb(tb){var ub=fb(tb),vb=gb(tb),wb=hb(tb),xb=m.get(tb,'flloc'),yb=ib(tb);q.init(ga,ub,xb,vb,wb,yb);l.conditionClass(ga,'followButtonFlyout',l.hasClass(tb,'profileFollowButton'));l.conditionClass(ga,'friendButtonFlyout',l.hasClass(tb,'FriendRequestFriends')||l.hasClass(tb,'FriendRequestIncoming')||l.hasClass(tb,'FriendRequestOutgoing'));l.conditionClass(ga,'likeButtonFlyout',l.hasClass(tb,'profileLikeButton'));var zb=p.scry(ga,'div.uiScrollableArea')[0];zb&&y.poke(zb);var ac=aa.find(ga)[0];ac&&ac.focus();}function lb(tb){if(!ea||fa)return;ea.setContext(tb);ea.setCausalElement(tb);tb.setAttribute('aria-expanded','true');if(bb(tb)){l.addClass(tb,"_52nd");if(l.hasClass(tb,'uiButton')||l.hasClass(tb,"_42fu"))l.addClass(tb,'selected');}ea.show();ia=tb;fa=true;var ub=null;if(ga){ub='show';kb(tb);}else{ub='init_show';new i().setURI('/ajax/friends/lists/flyout_content.php').setStatusElement(ea.getContent()).send();}jb();ja=g.listen(tb,'mouseleave',ob);ma=t.subscribe('show',mb);if(m.get(tb,'flfcloselistener'))clearTimeout(m.remove(tb,'flfcloselistenertimeout'));var vb=fb(tb);r.getFriend(vb,function(wb){if(wb.status==r.ARE_FRIENDS)new i().setURI('/ajax/friends/lists/flyout_log.php').setData({target_id:fb(tb),unref:ib(tb),action:ub}).send();if(!ha)return;if(wb.status==r.OUTGOING_REQUEST){l.show(ha);i.bootstrap('/ajax/friends/lists/nux_flyout.php',null,true);}else l.hide(ha);});}function mb(tb,ub){if(!(ub instanceof k)||!p.contains(ia,ub.getContext()))ob();}function nb(tb){ia=tb;ka=lb.curry(tb).defer(pa);ja=g.listen(tb,'mouseleave',function(){clearTimeout(ka);ia=null;ja&&ja.remove();});}function ob(){la=qb.defer(150);}function pb(){var tb=n.getCurrent(),ub=tb&&tb.getBody();return !!(ub&&p.scry(ub,'.friendListDialogTourCarousel')[0]);}function qb(){if(na||pb())return;ba.ie()<8&&document.documentElement.focus();if(ea){ea.hide();var tb=ea.getCausalElement();tb&&tb.setAttribute('aria-expanded','false');}}function rb(event){var tb=x.byTag(event.getTarget(),'a');if(tb&&l.hasClass(tb,'FriendListActionItem'))ob();}function sb(tb){var ub=m.remove(tb,'flfcloselistener');ub&&ub();}e.exports=a.FriendListFlyoutController||ra;});
__d("AddFriendButton",["Event","Animation","Arbiter","AsyncRequest","AsyncResponse","collectDataAttributes","CSS","DOMQuery","FriendListFlyoutController","FriendStatus","ge","goURI","Style","URI","XPubcontentChainedSuggestionsControllerURIBuilder"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('AsyncResponse'),l=b('collectDataAttributes'),m=b('CSS'),n=b('DOMQuery'),o=b('FriendListFlyoutController'),p=b('FriendStatus'),q=b('ge'),r=b('goURI'),s=b('Style'),t=b('URI'),u=b('XPubcontentChainedSuggestionsControllerURIBuilder'),v={ERROR_ALREADY_ADDED:1431005,init:function(w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){var ia=w.id,ja=null,ka=n.scry(w,'.addButton')[0],la=n.scry(w,'.addFriendText')[0],ma=n.scry(w,'.outgoingButton')[0],na=n.scry(w,'.incomingButton')[0],oa=n.scry(w,'.friendButton')[0];function pa(va,wa,xa){var ya=new t(ka.getAttribute('ajaxify')),za=l(w,['ft','gt']);new j().setURI(ba).setData({to_friend:x,action:va,how_found:z,ref_param:aa,link_data:za,outgoing_id:ma.id,xids:ya.getQueryData().xids,logging_location:ca,no_flyout_on_click:da,ego_log_data:ea,http_referer:ga}).setErrorHandler(wa).setServerDialogCancelHandler(xa).setRelativeTo(ma).send();if(ha&&va==='add_friend'){var ab=(new u()).getURI();new j().setURI(ab).send();}}function qa(va,wa){if(la){m.hide(la);}else if(ka)m.hide(ka);ma&&m.hide(ma);na&&m.hide(na);oa&&m.hide(oa);if(va)m.show(va);if('Outgoing'==wa&&ja!=wa&&fa)new h(va).from('backgroundColor','#FFF8CC').to('backgroundColor','transparent').from('borderColor','#FFE222').to('borderColor',s.get(va,'borderLeftColor')).duration(2000).go();ja&&m.removeClass(w,'fStatus'+ja);ja=wa;m.addClass(w,'fStatus'+wa);}function ra(va){if(m.hasClass(va,'enableFriendListFlyout')){o.show(va);}else o.hide();}var sa=i.subscribe('FriendRequest/change',function(va,wa){ua();if(wa.uid!=x)return;switch(wa.status){case p.ARE_FRIENDS:return qa(oa,'Friends');case p.INCOMING_REQUEST:return qa(na,'Incoming');case p.OUTGOING_REQUEST:return qa(ma,'Outgoing');case p.CAN_REQUEST:return qa(la?la:ka,'Requestable');}}),ta;if(y)ta=i.subscribe('FriendRequest/confirm',function(va,wa){ua();wa.uid==x&&r(y);});ka&&g.listen(ka,'click',function(){i.inform('FriendRequest/sending',{uid:x});if(da){o.setActiveNode(ma);}else ra(ma);pa("add_friend",function(va){var wa=va.error==v.ERROR_ALREADY_ADDED?'FriendRequest/sent':'FriendRequest/sendFail';i.inform(wa,{uid:x});o.hide();k.defaultErrorHandler(va);},function(va){i.inform('FriendRequest/sendFail',{uid:x});o.hide();});});function ua(){if(q(ia))return;sa&&sa.unsubscribe();ta&&ta.unsubscribe();sa=ta=null;}}};e.exports=v;});
__d("FriendButtonIcon",["Arbiter","FriendStatus","Button","arrayContains"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('FriendStatus'),i=b('Button'),j=b('arrayContains');e.exports={register:function(k,l,m){g.subscribe('FriendListMembershipChange',function(n,o){if(o.uid==m){var p=j(o.lists,h.CLOSE_FRIENDS),q=j(o.lists,h.ACQUAINTANCES);if(p&&!q){i.setIcon(k,l.close);}else if(q&&!p){i.setIcon(k,l.acquaintance);}else i.setIcon(k,l.friend);}});}};});